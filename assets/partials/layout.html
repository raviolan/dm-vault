<!-- Layout Partial: Main wrapper, references other partials -->
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{TITLE}}</title>
    <link rel="icon"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Ccircle cx='8' cy='8' r='7' fill='%238b5cf6'/%3E%3C/svg%3E" />
    <link rel="stylesheet" href="/assets/style.css?v={{VERSION}}" />
    <link rel="stylesheet" href="/assets/components.css?v={{VERSION}}" />
    <link rel="stylesheet" href="/assets/enhanced-todo.css?v={{VERSION}}" />
    <link rel="stylesheet" href="/assets/modal.css?v={{VERSION}}" />
    <link rel="stylesheet" href="/assets/landing-pages.css?v={{VERSION}}" />
    <script>window.SITE_BASE = "/"</script>
</head>

<body>
    <div class="layout">
        {{HEADER}}
        <!-- Compact weather strip: mirrors left-panel weather card -->
        <div id="weatherStrip" class="weather-strip" aria-hidden="false"></div>
        <aside class="left">{{SIDEBAR}}</aside>
        <main class="main">
            <div class="breadcrumb-container">
                <div id="breadcrumbText" class="main-breadcrumb meta"></div>
                <button id="btnDeletePage" class="delete-page-btn" title="Delete this page"
                    aria-label="Delete this page">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M10 11v6M14 11v6" />
                    </svg>
                </button>
            </div>{{CONTENT}}
            <!-- Page Actions Modals -->
            <div class="modal" id="createPageModal" tabindex="-1" aria-modal="true" style="display:none;">
                <div class="modal-content">
                    <h2>Create New Page</h2>
                    <form>
                        <label>Section
                            <select name="pageSection" disabled>
                                <option value="">(Coming soon)</option>
                            </select>
                        </label>
                        <label>Type
                            <select name="pageType">
                                <option value="note">Note</option>
                                <option value="npc">NPC</option>
                                <option value="location">Location</option>
                                <option value="arc">Arc</option>
                                <option value="tool">Tool</option>
                            </select>
                        </label>
                        <label>Title
                            <input name="pageTitle" type="text" required autocomplete="off" />
                        </label>
                        <div class="modal-actions">
                            <button type="button" class="modal-cancel">Cancel</button>
                            <button type="button" class="modal-confirm">Create</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal" id="deletePageModal" tabindex="-1" aria-modal="true" style="display:none;">
                <div class="modal-content">
                    <h2>Delete Page</h2>
                    <p>Are you sure? This cannot be undone.</p>
                    <p>Type the page title to confirm: <strong class="delete-page-title-label"></strong></p>
                    <input name="deleteConfirmTitle" type="text" autocomplete="off" />
                    <div class="modal-actions">
                        <button type="button" class="modal-cancel">Cancel</button>
                        <button type="button" class="modal-confirm" disabled>Delete</button>
                    </div>
                </div>
            </div>
        </main>
        <aside class="right">{{RIGHT}}</aside>
        <div class="resizer resizer-left" aria-hidden="true"></div>
        <div class="resizer resizer-right" aria-hidden="true"></div>
    </div>
    <button id="drawerReveal" class="drawer-tab" aria-label="Show tools">Tools</button>
    <script src="/assets/markdown.js"></script>
    <script src="/assets/right-panel-loader.js?v={{VERSION}}"></script>
    <script src="/assets/right-panel.js?v={{VERSION}}"></script>
    <script src="/assets/site.js?v={{VERSION}}"></script>
    <script src="/assets/favorites.js?v={{VERSION}}"></script>
    <script src="/assets/wysiwyg.js?v={{VERSION}}"></script>
    <script src="/assets/right-panel-loader.js?v={{VERSION}}"></script>
    <script src="/assets/right-panel.js?v={{VERSION}}"></script>
    <script src="/assets/keyboard-nav.js?v={{VERSION}}"></script>
    <script src="/assets/theme.js?v={{VERSION}}"></script>
    <script src="/assets/shortcuts-guide.js?v={{VERSION}}"></script>
    <script src="/assets/collapsible-sections.js?v={{VERSION}}"></script>
    <script src="/assets/weather.js?v={{VERSION}}"></script>
    <!-- Enemy Generator: Always include the mini-app script on this page -->
    {{#if TITLE == 'Enemy Generator'}}
    <script src="/assets/enemy-generator.js?v={{VERSION}}"></script>
    {{/if}}
    <script src="/assets/ui/page-actions.js?v={{VERSION}}"></script>
    {{EXTRA_SCRIPTS}}
    {{FOOTER}}
</body>

</html>